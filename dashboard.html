<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÁªèËê•ÂèÇË∞ã ¬∑ ÈìÅÊØÖÁ••ÊàòÊó∂‰∏≠Êéß</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* DASHBOARD PRO MODE */
        body.dashboard-mode {
            background: #000;
            color: #fff;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", sans-serif;
            margin: 0;
            padding: 0;
        }

        .dash-mesh {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 50% 10%, #1a1a1a 0%, #000 70%);
        }

        /* GRID LAYOUT - PRO */
        .pro-grid {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            grid-template-rows: 80px 1fr 1fr;
            gap: 20px;
            height: 100vh;
            padding: 24px;
            box-sizing: border-box;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* CARD STYLES */
        .glass-panel {
            background: rgba(28, 28, 30, 0.6);
            backdrop-filter: blur(40px) saturate(160%);
            -webkit-backdrop-filter: blur(40px) saturate(160%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        .value-lg {
            font-size: 42px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            letter-spacing: -1px;
        }

        .value-md {
            font-size: 28px;
            font-weight: 600;
            font-variant-numeric: tabular-nums;
        }

        .accent-red {
            color: #FF3B30;
        }

        .accent-green {
            color: #30D158;
        }

        .accent-gold {
            color: #FFD60A;
        }

        .accent-blue {
            color: #0A84FF;
        }

        /* LIVE LOG */
        .log-container {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
        }

        .log-item {
            font-family: "SF Mono", monospace;
            font-size: 12px;
            padding: 6px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.7);
            animation: slideDown 0.3s ease-out;
        }

        .log-time {
            color: rgba(255, 255, 255, 0.3);
            margin-right: 8px;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* SYSTEM DEBUG PANEL (Mimicking the user's screenshot) */
        #sys-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #34C759;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
            z-index: 1000;
            font-weight: 500;
            transition: transform 0.2s;
        }

        #sys-btn:hover {
            transform: translateY(-2px);
        }

        #sys-panel {
            position: fixed;
            top: 60px;
            right: 20px;
            width: 320px;
            background: rgba(255, 255, 255, 0.95);
            color: #000;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            padding: 15px;
            font-size: 13px;
            z-index: 999;
            display: none;
            animation: fadeIn 0.2s ease;
        }

        .sys-row {
            display: flex;
            margin-bottom: 8px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }

        .sys-key {
            width: 100px;
            font-weight: bold;
            color: #333;
        }

        .sys-val {
            flex: 1;
            color: #007aff;
            word-break: break-all;
        }

        /* AREAS */
        .area-header {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .area-sidebar-l {
            grid-row: 2 / 4;
            display: grid;
            gap: 20px;
            grid-template-rows: 1fr 1fr;
        }

        .area-main {
            grid-column: 2 / 3;
            grid-row: 2 / 4;
            position: relative;
        }

        .area-sidebar-r {
            grid-column: 3 / 4;
            grid-row: 2 / 4;
            display: grid;
            gap: 20px;
            grid-template-rows: 1.5fr 1fr;
        }

        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .pro-grid {
                display: flex;
                flex-direction: column;
                height: auto;
                overflow-y: scroll;
            }

            .area-main {
                height: 400px;
            }

            #sys-panel {
                width: 90%;
                right: 5%;
            }
        }
    </style>
</head>

<body class="dashboard-mode">
    <div class="dash-mesh"></div>

    <!-- SYSTEM DEBUG BUTTON -->
    <button id="sys-btn" onclick="toggleSysPanel()">Êü•ÁúãÁéØÂ¢É‰ø°ÊÅØ</button>
    <div id="sys-panel">
        <div class="sys-row">
            <div class="sys-key">ÂèëÂ∏ÉÁéØÂ¢É</div>
            <div class="sys-val">production</div>
        </div>
        <div class="sys-row">
            <div class="sys-key">ÂèëÂ∏É‰∫∫</div>
            <div class="sys-val">TieYiXiang_Admin</div>
        </div>
        <div class="sys-row">
            <div class="sys-key">AppKey</div>
            <div class="sys-val">com.tieyixiang.warroom</div>
        </div>
        <div class="sys-row">
            <div class="sys-key">Server</div>
            <div class="sys-val">Aliyun_SG_04</div>
        </div>
        <div class="sys-row">
            <div class="sys-key">H5Guard</div>
            <div class="sys-val" style="color:#34C759">Active (v2.4.1)</div>
        </div>
        <div class="sys-row">
            <div class="sys-key">Latency</div>
            <div class="sys-val">24ms</div>
        </div>
    </div>

    <!-- MAIN GRID -->
    <div class="pro-grid">

        <!-- HEADER ROW -->
        <div class="area-header glass-panel" style="flex-direction: row; background: rgba(0,0,0,0.3); border:none;">
            <div style="display:flex; align-items:center gap:15px;">
                <a href="index.html"
                    style="color:rgba(255,255,255,0.5); text-decoration:none; margin-right:20px; font-weight:600;">‚Üê
                    ÈÄÄÂá∫</a>
                <h1 style="margin:0; font-size:20px; letter-spacing:1px; font-weight:700;">ÁªèËê•ÂèÇË∞ã ¬∑ ÂÆûÊó∂ÁõëÊéß</h1>
                <span
                    style="background:rgba(255,59,48,0.2); color:#FF3B30; font-size:11px; padding:2px 6px; border-radius:4px; margin-left:15px;">LIVE</span>
            </div>
            <div style="font-family:'SF Mono'; font-size:14px; opacity:0.6;" id="realtime-clock"></div>
        </div>

        <!-- LEFT SIDEBAR: CORE METRICS -->
        <div class="area-sidebar-l">
            <!-- GMV -->
            <div class="glass-panel" onclick="editData('gmv')">
                <div class="label">
                    <span>‰ªäÊó•È¢ÑËÆ°Ëê•Êî∂ (GMV)</span>
                    <span class="accent-gold">¬•</span>
                </div>
                <div class="value-lg accent-gold"><span style="font-size:24px;">¬•</span><span id="val-gmv">12,450</span>
                </div>
                <div style="margin-top:auto; font-size:13px; color:rgba(255,255,255,0.5);">
                    Êò®Êó•ÁéØÊØî <span class="accent-green">‚ñ≤ 12.4%</span>
                </div>
            </div>

            <!-- ORDERS -->
            <div class="glass-panel" onclick="editData('orders')">
                <div class="label">
                    <span>ÊîØ‰ªòËÆ¢ÂçïÊï∞ (Orders)</span>
                    <span>üì¶</span>
                </div>
                <div class="value-lg" id="val-orders">142</div>
                <div style="margin-top:auto; font-size:13px; color:rgba(255,255,255,0.5);">
                    ÂÆ¢Âçï‰ª∑ <span id="val-atv">¬•87.6</span>
                </div>
            </div>
        </div>

        <!-- CENTER MAIN: COUNTDOWN & FUNNEL -->
        <div class="area-main glass-panel">
            <div class="label">ÂÜ≥ÊàòÂÄíËÆ°Êó∂ (Mission Countdown)</div>

            <!-- Radar Visual -->
            <div
                style="position: absolute; top:50%; left:50%; transform:translate(-50%, -50%); opacity:0.3; pointer-events:none;">
                <div
                    style="width:300px; height:300px; border:1px solid #FF3B30; border-radius:50%; animation: pulse 3s infinite;">
                </div>
                <div
                    style="width:200px; height:200px; border:1px solid #FF3B30; border-radius:50%; position:absolute; top:50px; left:50px; animation: pulse 3s infinite 1s;">
                </div>
            </div>

            <div style="text-align:center; margin-top:40px; z-index:2;">
                <div id="countdown-lg" style="font-size:80px; font-weight:800; line-height:1; letter-spacing:-2px;">
                    20<span style="font-size:30px">Â§©</span></div>
                <div id="countdown-sm" style="font-family:'SF Mono'; color:#FF3B30; font-size:20px; margin-top:5px;">
                    00:00:00</div>
            </div>

            <div
                style="margin-top:auto; display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; border-top:1px solid rgba(255,255,255,0.1); padding-top:20px;">
                <div>
                    <div style="font-size:12px; opacity:0.5;">ÊõùÂÖâ‰∫∫Êï∞</div>
                    <div style="font-size:20px; font-weight:600;" id="val-traffic">4,205</div>
                </div>
                <div>
                    <div style="font-size:12px; opacity:0.5;">ËøõÂ∫óËΩ¨Âåñ</div>
                    <div style="font-size:20px; font-weight:600; color:#0A84FF;">20.1%</div>
                </div>
                <div>
                    <div style="font-size:12px; opacity:0.5;">ÂñäÂ†ÇÊ¨°Êï∞</div>
                    <div style="font-size:20px; font-weight:600; color:#34C759;" id="val-voice">128</div>
                </div>
            </div>
        </div>

        <!-- RIGHT SIDEBAR: LOG -->
        <div class="area-sidebar-r">
            <!-- LIVE LOG -->
            <div class="glass-panel">
                <div class="label">
                    <span>ÂÆûÊó∂‰∫§ÊòìÊó•Âøó</span>
                    <span
                        style="width:6px; height:6px; background:#34C759; border-radius:50%; box-shadow:0 0 8px #34C759;"></span>
                </div>
                <div class="log-container" id="live-log">
                    <!-- Logs go here -->
                </div>
            </div>

            <!-- Marketing Status -->
            <div class="glass-panel">
                <div class="label">Ëê•ÈîÄÊäïÊµÅÁä∂ÊÄÅ</div>
                <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:10px;">
                    <span style="font-size:13px;">Dou+ ËÆ°ÂàíA</span>
                    <span
                        style="font-size:11px; color:#34C759; border:1px solid #34C759; padding:1px 4px; border-radius:4px;">Ê∂àËÄó‰∏≠</span>
                </div>
                <div
                    style="width:100%; height:4px; background:rgba(255,255,255,0.1); border-radius:2px; overflow:hidden;">
                    <div style="width:65%; height:100%; background:#0A84FF;"></div>
                </div>
                <div style="margin-top:15px; display:flex; align-items:center; justify-content:space-between;">
                    <span style="font-size:13px;">Â∞èÁ∫¢‰π¶ËÅöÂÖâ</span>
                    <span
                        style="font-size:11px; color:#FFD60A; border:1px solid #FFD60A; padding:1px 4px; border-radius:4px;">Á´û‰ª∑‰∏≠</span>
                </div>
            </div>
        </div>

    </div>

    <!-- SCRIPTS -->
    <script src="script.js"></script>
    <script>
        // --- 1. SYSTEM DEBUG PANEL TOGGLE ---
        function toggleSysPanel() {
            const p = document.getElementById('sys-panel');
            p.style.display = p.style.display === 'block' ? 'none' : 'block';
        }

        // --- 2. DATA STATE & PERSISTENCE ---
        const DATA_KEY = 'tieyixiang_pro_data';
        let store = JSON.parse(localStorage.getItem(DATA_KEY)) || {
            gmv: 12450,
            orders: 142,
            voice: 128,
            traffic: 4205
        };

        function saveStore() {
            localStorage.setItem(DATA_KEY, JSON.stringify(store));
        }

        // --- 3. RENDER FUNCTION ---
        function render() {
            document.getElementById('val-gmv').innerText = parseInt(store.gmv).toLocaleString();
            document.getElementById('val-orders').innerText = store.orders;
            document.getElementById('val-voice').innerText = store.voice;
            document.getElementById('val-traffic').innerText = parseInt(store.traffic).toLocaleString();

            // Calc ATV
            const atv = store.orders > 0 ? (store.gmv / store.orders).toFixed(1) : 0;
            document.getElementById('val-atv').innerText = '¬•' + atv;
        }
        render();

        // --- 4. CLICK TO EDIT (MANUAL OVERRIDE) ---
        window.editData = (key) => {
            let label = key === 'gmv' ? 'Ëê•Êî∂ÈáëÈ¢ù' : 'ËÆ¢ÂçïÊï∞';
            let oldVal = store[key];
            let newVal = prompt(`„Äê‰øÆÊ≠£Êï∞ÊçÆ„ÄëËØ∑ËæìÂÖ•Êñ∞ÁöÑ${label}:`, oldVal);
            if (newVal && !isNaN(newVal)) {
                store[key] = parseInt(newVal);
                saveStore();
                render();
            }
        };

        // --- 5. SIMULATION ENGINE (The Crawler) ---
        function addLog(msg) {
            const box = document.getElementById('live-log');
            const div = document.createElement('div');
            div.className = 'log-item';
            const time = new Date().toLocaleTimeString('en-US', { hour12: false });
            div.innerHTML = `<span class="log-time">[${time}]</span> ${msg}`;
            box.prepend(div);
            if (box.children.length > 20) box.lastChild.remove();
        }

        // Init some logs
        addLog("System initialized. Monitoring active.");
        addLog("Connected to Meituan Merchant API (Simulated).");

        setInterval(() => {
            // Random Events
            const rand = Math.random();

            // 1. New Order (30% chance every 2s)
            if (rand > 0.7) {
                const amount = Math.floor(Math.random() * 80) + 30; // 30-110 RMB
                store.gmv += amount;
                store.orders += 1;
                store.traffic += Math.floor(Math.random() * 5);

                render();
                saveStore();

                const table = Math.floor(Math.random() * 12) + 1;
                addLog(`Table A${table}: Payment success <span class="accent-gold">¬•${amount}.00</span>`);
            }

            // 2. Voice Shout (20% chance)
            if (rand > 0.8) {
                store.voice += 1;
                render();
                addLog(`Microphone: "Welcome!" triggered (Zone B)`);
            }

            // 3. System Heartbeat
            if (rand < 0.05) {
                addLog(`System sync: Data uploaded to cloud.`);
            }

        }, 2500);

        // --- 6. REALTIME CLOCK & COUNTDOWN ---
        setInterval(() => {
            document.getElementById('realtime-clock').innerText = new Date().toLocaleString();
        }, 1000);

        function updateCountdown() {
            if (window.getDiff) {
                const diff = window.getDiff();
                const daysEl = document.getElementById('countdown-lg');
                const smEl = document.getElementById('countdown-sm');

                if (diff <= 0) {
                    daysEl.innerHTML = "0<span style='font-size:30px'>Â§©</span>";
                    smEl.innerText = "MISSION COMPLETE";
                } else {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                    daysEl.innerHTML = `${days}<span style="font-size:30px">Â§©</span>`;
                    smEl.innerText = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }
            requestAnimationFrame(updateCountdown);
        }
        updateCountdown();

    </script>
</body>

</html>